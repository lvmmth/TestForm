<html>
  <head>
    <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css'>
    <link rel='stylesheet' href='https://unpkg.com/formiojs@latest/dist/formio.full.min.css'>
    <script src='https://unpkg.com/formiojs@latest/dist/formio.full.min.js'></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type='text/javascript'>
      window.onload = function() {
        Formio.createForm(document.getElementById('formio'),
			{"_id":"59b2338267d7fa0007a56471","machineName":"dtsserixszcjdbn:subString","modified":"2017-09-12T05:00:22.594Z","title":"SubString","display":"form","name":"subString","path":"substring","project":"59b0f9632f12080007486ff8","action":"","created":"2017-09-08T06:06:58.588Z","components":[{"path":"text1","properties":{"str":""},"tags":[],"type":"textfield","conditional":{"eq":"","when":null,"show":""},"validate":{"customPrivate":false,"custom":"","pattern":"","maxLength":"","minLength":"","required":false},"clearOnHide":true,"hidden":false,"persistent":true,"unique":false,"protected":false,"defaultValue":"","multiple":false,"suffix":"","prefix":"","placeholder":"Type your word here.","key":"wording","label":"Your text before sub string","inputMask":"","inputType":"text","tableView":true,"input":true,"style":{"margin-top":"80px"},"lockKey":true,"calculateValue":""},{"source":"59b0fc306d85560007c28255","lockKey":true,"tags":[],"conditional":{"show":"","when":null,"eq":""},"properties":{"x":""},"type":"number","validate":{"custom":"","multiple":"","integer":"","step":"any","max":"","min":"","required":false},"clearOnHide":true,"hidden":false,"persistent":true,"protected":false,"defaultValue":"","suffix":"","prefix":"","placeholder":"Specify number of index to substring left.","key":"xPosition","label":"Index (X)","inputType":"number","tableView":true,"input":true,"path":"xPosition"},{"key":"space","input":false,"components":[{"lockKey":true,"style":{"margin-left":""},"disabled":false,"inline":true,"properties":{"":""},"conditional":{"eq":"","when":null,"show":""},"tags":[],"type":"radio","validate":{"customPrivate":false,"custom":"","required":false},"clearOnHide":true,"hidden":false,"persistent":true,"protected":false,"defaultValue":"","values":[{"label":"Add","value":"add"},{"label":"Multiply","value":"multiply"},{"label":"SubString Left","value":"subStringLeft"},{"label":"SubString Right","value":"subStringRight"},{"value":"concat","label":"Concat"}],"key":"functions","label":"","inputType":"radio","tableView":true,"input":true}],"tableView":false,"type":"well","tags":[],"conditional":{"show":"","when":null,"eq":""},"properties":{"":""},"customClass":"","lockKey":true},{"event":"","custom":"$(document).ready(function(){\n    $(\"button\").click(function(){\n         $.ajax({\n         url:\"https://functionappjs.azurewebsites.net/api/LEFT?str=data['str']&x=data['x']\",\n         type: \"GET\",\n         dataType: \"jsonp\",\n         complete: function(res){\n         alert(JSON.stringify(res));\n  }\n});\n\n    });\n});","properties":{"":""},"conditional":{"eq":"","when":null,"show":""},"tags":[],"type":"button","theme":"primary","disableOnInvalid":false,"action":"custom","block":false,"rightIcon":"","leftIcon":"","size":"md","key":"submit","tableView":false,"label":"Start","input":true,"style":{"margin-left":""},"overlay":{"style":""},"lockKey":true},{"source":"59b0fc306d85560007c28255","lockKey":true,"properties":{"output":""},"tags":[],"description":"","type":"textfield","conditional":{"eq":"","when":null,"show":"","json":{"if":[{"==":[{"var":"data.text1"},"Show"]},true,"You must type 'Show'!"]}},"validate":{"customPrivate":false,"custom":"","pattern":"","maxLength":"","minLength":"","required":false},"clearOnHide":true,"hidden":false,"persistent":true,"unique":false,"protected":false,"defaultValue":"","multiple":false,"suffix":"","prefix":"","placeholder":"Your text after substring!","key":"yourtextaftersubstringleft","label":"Output","inputMask":"","inputType":"text","tableView":true,"input":true,"calculateValue":"value = data['output'];","customDefaultValue":""}],"owner":"59b0f7f0678919000775f787","submissionAccess":[{"type":"create_all","roles":["59b0f9642f12080007486ff9"]},{"type":"read_all","roles":["59b0f9642f12080007486ff9","59b0f9642f12080007486ffa","59b0f9642f12080007486ffb"]},{"type":"update_all","roles":["59b0f9642f12080007486ff9"]},{"type":"delete_all","roles":[]},{"type":"create_own","roles":[]},{"type":"read_own","roles":[]},{"type":"update_own","roles":[]},{"type":"delete_own","roles":[]},{"type":"team_read","roles":[]},{"type":"team_write","roles":[]},{"type":"team_admin","roles":[]}],"access":[{"type":"create_all","roles":[]},{"type":"read_all","roles":["59b0f9642f12080007486ff9","59b0f9642f12080007486ffa","59b0f9642f12080007486ffb"]},{"type":"update_all","roles":[]},{"type":"delete_all","roles":[]},{"type":"create_own","roles":[]},{"type":"read_own","roles":[]},{"type":"update_own","roles":[]},{"type":"delete_own","roles":[]},{"type":"team_read","roles":[]},{"type":"team_write","roles":[]},{"type":"team_admin","roles":[]}],"tags":[],"type":"form"}
		).then(function(form){
        form.on('submit', function(submission) {
          var url = 'https://apimanament.azure-api.net/left/left?str=';
          url += submission.data.str;
          url += '&x=';
          url += submission.data.x;
          $.ajax({
            url: url,
            beforeSend: function(xhrObj){
              // Request Header
            },
            type: "GET"
          }).done(function(data){
            
	form.submission ={ data: {

		output: JSON.stringify(data.result)
  }
};
          }).fail(function(err){
            console.log(err)
          });
        console.log(submission);
        });
    });
    }
    </script>
  </head>
  <body>
    <div id='formio'></div>
  </body>
</html>